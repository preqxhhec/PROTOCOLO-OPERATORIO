<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo Operatorio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Pantalla de Login -->
    <div id="login" class="login-container">
        <div class="form-header">
            <img src="logo.png" alt="Hospital Dr. Humberto Elorza Cortés" class="form-logo">
            <h2>PROTOCOLO OPERATORIO</h2>
        </div>
        <label>Usuario</label>
        <input type="text" id="usuario" placeholder="Ingrese usuario">
        <label>Contraseña</label>
        <input type="password" id="password" placeholder="Ingrese contraseña">
        <br><br>
        <button id="btnLogin">Ingresar</button>
        <p id="error-login" class="error"></p>
    </div>

    <!-- Formulario Principal -->
    <div id="formulario" class="main-container hidden">
        <div class="form-header">
            <img src="logo.png" alt="Hospital Dr. Humberto Elorza Cortés" class="form-logo">
            <h1>PROTOCOLO OPERATORIO</h1>
        </div>

        <div class="busqueda-anterior">
            <h2>Búsqueda de Protocolos Anteriores</h2>
            <div class="form-grid" style="grid-template-columns: 1fr 1fr auto;">
                <div>
                    <label>Ingrese RUT para buscar</label>
                    <input type="text" id="buscarRut" placeholder="sin (.) y sin (-) con digito verificador" maxlength="12" onblur="formatearRutBusqueda()">
                </div>
                <div></div>
                <div style="align-self: end;">
                    <button id="btnBuscar" class="secondary">BUSCAR</button>
                </div>
            </div>
            <div id="resultadosBusqueda" style="margin-top: 20px;"></div>
        </div>

        <h2>1. Datos Generales del Paciente</h2>
        <div class="form-grid paciente-lineal">
            <div>
                <label>Fecha y Hora</label>
                <input type="text" id="fechaHora" readonly>
            </div>
            <div>
                <label>Nombre y Apellido</label>
                <input type="text" id="nombrePaciente">
            </div>
            <div>
                <label>RUT</label>
                <input type="text" id="rut" placeholder="12345678-K" maxlength="12">
            </div>
            <div>
                <label>Edad</label>
                <input type="number" id="edad" min="0">
            </div>
            <div>
                <label>N° Ficha</label>
                <input type="text" id="ficha">
            </div>
        </div>

        <h2>Intervenciones</h2>
        <div class="full-width">
            <label>Intervención Principal</label>
            <input list="intervenciones1" id="intervencion1" autocomplete="off">
        </div>
        <div class="full-width">
            <label>2da Intervención</label>
            <input list="intervenciones2" id="intervencion2" autocomplete="off">
        </div>
        <div class="full-width">
            <label>3ra Intervención</label>
            <input list="intervenciones3" id="intervencion3" autocomplete="off">
        </div>
        <div class="full-width">
            <label>4ta Intervención</label>
            <input list="intervenciones4" id="intervencion4" autocomplete="off">
        </div>

        <div class="form-grid">
            <div>
                <label>Diagnóstico Preoperatorio</label>
                <input type="text" id="diagPre" list="diagnosticos" autocomplete="off" class="textarea-like" placeholder="Escribe o selecciona un diagnóstico...">
            </div>
            <div>
                <label>Diagnóstico Postoperatorio</label>
                <input type="text" id="diagPost" list="diagnosticos" autocomplete="off" class="textarea-like" placeholder="Escribe o selecciona un diagnóstico...">
            </div>
        </div>

        <h2>2. Datos del Equipo Quirúrgico</h2>
        <div class="full-width">
            <label>Especialidad</label>
            <select id="especialidadSelect">
                <option value="">Seleccionar especialidad</option>
            </select>
        </div>

        <div class="form-grid">
            <div><label>1er Cirujano</label><input list="cirujanosFiltrados1" id="cirujano1" autocomplete="off" class="no-normalizar" ></div>
            <div><label>2do Cirujano</label><input list="cirujanosTodos" id="cirujano2" autocomplete="off" class="no-normalizar" ></div>
            <div><label>3er Cirujano</label><input list="cirujanosTodos" id="cirujano3" autocomplete="off" class="no-normalizar" ></div>
            <div><label>4to Cirujano</label><input list="cirujanosTodos" id="cirujano4" autocomplete="off" class="no-normalizar" ></div>
            <div><label>Anestesiólogo</label><input list="anestesiologos" id="anestesiologo" autocomplete="off" ></div>
            <div><label>Auxiliar de Anestesia</label><input list="auxiliares" id="auxAnestesia" autocomplete="off" ></div>
            <div><label>Enfermera</label><input list="enfermeras" id="enfermera" autocomplete="off" ></div>
            <div><label>Arsenalera</label><input list="arsenaleras" id="arsenalera" autocomplete="off" ></div>
            <div><label>Pabellonera</label><input list="pabelloneras" id="pabellonera" autocomplete="off" ></div>
        </div>

        <h2>3. Especificaciones</h2>
        <div class="form-grid">
            <div><label>Tipo de Anestesia</label><input list="tiposAnestesia" id="tipoAnestesia" autocomplete="off"></div>
            <div><label>Modalidad</label><input list="modalidades" id="modalidad" autocomplete="off"></div>
            <div><label>N° Pabellón</label><select id="pabellon"><option value="">Seleccionar</option><option value="1">1</option><option value="2">2</option><option value="SALA DE PARTO">SALA DE PARTO</option></select></div>
            <div><label>Hora de Inicio (24h)</label><input type="time" id="horaInicio"></div>
            <div><label>Hora de Término (24h)</label><input type="time" id="horaTermino"></div>
            <div><label>Biopsia</label><select id="biopsia"><option value="NO">NO</option><option value="SI">SI</option></select></div>
            <div><label>Cultivo</label><select id="cultivo"><option value="NO">NO</option><option value="SI">SI</option></select></div>

            <div><label>Destino</label><select id="destino">
                <option value="CMA">CMA</option>
                <option value="HOSPITALIZACION">HOSPITALIZACION</option>
                <option value="UTI">UTI</option>
                <option value="URGENCIA">URGENCIA</option>
            </select></div>
        </div>

        <h2>4. Descripción de la Intervención</h2>
        <textarea id="descripcion" placeholder="Describa detalladamente la intervención realizada..."></textarea>

        <div class="botones">
            <button id="btnGuardarImprimir">GUARDAR / IMPRIMIR</button>
            <button class="secondary" id="btnEditar">EDITAR</button>
            <button class="danger" id="btnEliminar">ELIMINAR REGISTRO</button>
        </div>

        <div class="footer-credito">
            © Dr. Danilo A. Nava La C. - Médico Anestesiólogo - Jefe del Proceso quirúrgico. (En caso de necesitar alguna modificación llamar a ext 533785)
        </div>
    </div>

    <datalist id="intervenciones1"></datalist>
    <datalist id="intervenciones2"></datalist>
    <datalist id="intervenciones3"></datalist>
    <datalist id="intervenciones4"></datalist>
    <datalist id="cirujanosFiltrados1"></datalist>
    <datalist id="cirujanosTodos"></datalist>
    <datalist id="anestesiologos"></datalist>
    <datalist id="auxiliares"></datalist>
    <datalist id="enfermeras"></datalist>
    <datalist id="arsenaleras"></datalist>
    <datalist id="pabelloneras"></datalist>
    <datalist id="tiposAnestesia"></datalist>
    <datalist id="modalidades"></datalist>
    <datalist id="diagnosticos"></datalist>

    <script src="script.js"></script>

    <!-- Modal de contraseña oculta -->
    <div id="modalPassword" class="modal-hidden">
        <div class="modal-content">
            <h3>Ingrese contraseña para continuar</h3>
            <input type="password" id="inputPasswordModal" placeholder="Contraseña" autocomplete="off">
            <div class="modal-buttons">
                <button id="btnAceptarPassword" class="secondary">Aceptar</button>
                <button id="btnCancelarPassword">Cancelar</button>
            </div>
            <p id="errorPasswordModal" class="error"></p>
        </div>
    </div>

</body>
</html>
